# Kubernetes secrets

## Creating a secret using `kubectl`

```shell
$ kubectl create secret generic some-secret --from-literal=data=secret
secret/some-secret created

$ kubectl describe secret some-secret
Name:         some-secret
Namespace:    default
Labels:       <none>
Annotations:  <none>

Type:  Opaque

Data
====
data:  6 bytes

$ kubectl get secret some-secret -o jsonpath='{.data}'
{"data":"c2VjcmV0"}

$ [System.Text.Encoding]::UTF8.GetString([System.Convert]::FromBase64String('c2VjcmV0'))
secret
```

## Creating a secret using `Helm`

```shell
$ kubectl get po
NAME                           READY   STATUS      RESTARTS   AGE
app-python-cdd7f7cf7-vqfcr     1/1     Running     0          3m12s

$ kubectl exec app-python-cdd7f7cf7-vqfcr -- printenv | Select-String -Pattern SOME_SECRET
SOME_SECRET=secret
```

## Creating a secret using `Vault`

```shell
$ kubectl exec -it app-python-7dfcd68c58-7qccj -- /bin/sh
Defaulted container "app-python" out of: app-python, vault-agent, vault-agent-init (init)
/app $ cat /vault/secrets/app-python-secret.txt
data: map[data:secret]
metadata: map[created_time:2024-03-24T16:44:13.164157921Z custom_metadata:<nil> deletion_time: destroyed:false version:1]
/app $ df -h
Filesystem                Size      Used Available Use% Mounted on
overlay                1006.9G     18.7G    937.0G   2% /
tmpfs                    64.0M         0     64.0M   0% /dev
tmpfs                     1.9G         0      1.9G   0% /sys/fs/cgroup
tmpfs                     3.7G      4.0K      3.7G   0% /vault/secrets
/dev/sde               1006.9G     18.7G    937.0G   2% /dev/termination-log
/dev/sde               1006.9G     18.7G    937.0G   2% /etc/resolv.conf
/dev/sde               1006.9G     18.7G    937.0G   2% /etc/hostname
/dev/sde               1006.9G     18.7G    937.0G   2% /etc/hosts
shm                      64.0M         0     64.0M   0% /dev/shm
tmpfs                     3.7G     12.0K      3.7G   0% /run/secrets/kubernetes.io/serviceaccount
tmpfs                     1.9G         0      1.9G   0% /proc/acpi
tmpfs                    64.0M         0     64.0M   0% /proc/kcore
tmpfs                    64.0M         0     64.0M   0% /proc/keys
tmpfs                    64.0M         0     64.0M   0% /proc/timer_list
tmpfs                     1.9G         0      1.9G   0% /sys/firmware
```